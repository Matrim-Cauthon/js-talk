<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=PT+Sans:400,400italic);
      @import url(https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css);

      body {
       font-family: 'PT Sans';
      }
      .remark-slide-content{
        background: #5C5352;
      }
      h1, h2, h3 {
        font-family: 'PT Sans';
        font-weight: lighter;
      }
      .remark-code, .remark-inline-code { font-family: 'Hack'; }

      .inverse {
        background: #0C2342;
        color: #2590C3;
      }


    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle, inverse

# Lessons Learned Making an Open-Source Plugin Framework

### a.k.a. How to Modernize Your JS for Much Success

---

class: center, middle, inverse

# What Framework?

![XSplit JS Logo](./img_logo.png)


???

What is XSplit?

What is a plugin?

---

class: center, middle

![ExtraLife](./extralife_tracker.png)

![TwitchChat](./twitch_chat.png)

???

What is this framework? we're not talking about a jQuery plugin

How did we make the plugin framework?

---

class: center, middle, inverse

# Lesson 1: Don't be scared of new things

???

TypeScript: support for type checking, for next-generation JS

built everything from scratch

bleeding-edge has pros and cons, sometimes you should take the plunge

---

class: middle

```typescript
export class File implements Addable {
  private _path: string;

  addToScene(): Promise<boolean> {
    return new Promise(resolve => {
      iApp.callFunc('addfile', this._path).then(() => {
        resolve(true);
      });
    });
  }
}
```

---

class: center, middle, inverse

# Lesson 2: Be willing to accept changes in code

???

concept of code ownership can go too far

went through at least 3 iterations

refactor refactor refactor!

effect on user feedback?

---

class: center, middle, inverse

# Lesson 3: Committed to nonbreaking changes

???

emphasize that this is to be used not internally, but by other people

after version 1, ensure compatibility, non changing API

console.warn is a good thing

talk about semver. minor versions should simply deprecate, never break

---

class: center, middle, inverse

# Lesson 4: Always document your code

---

class: middle

```typescript
/**
 * return: Promise<Scene>
 *
 * Get a specific scene object given the scene number.
 *
 *
 * #### Usage
 *
 * ```javascript
 * var scene1;
 * Scene.getByIdAsync(1).then(function(scene) {
 *   scene1 = scene;
 * });
 * ``` ‚Å£
 */
static getByIdAsync(sceneNum: number): Promise<Scene> {
  return new Promise(resolve => {
    Scene._initializeScenePoolAsync().then(cnt => {
      resolve(Scene._scenePool[sceneNum - 1]);
    });
  });
}
```

???

descriptive docs, generated by dgeni

sample code

do not break encapsulation in your docs. users do not need to know all the little details

docs are also reflected in error messages

docs also contain recommended patterns in using framework

release notes!

---

class: center, middle, inverse

# Lesson 5: Make sure your code is tested

???

we test with Jasmine

continuous integration with Travis

useful when doing large refactoring

Travis build passed badge ;)

---

class: center

![Jasmine](./jasmine.png)

![Karma](./karma.png)

![Travis](./travis.png)

---

class: center, middle, inverse

# Lesson 6:  Automate repetitive tasks

???

things we automate: building (includes transpiling, bundling, minification), docgen, tests, version appending

things we want to automate: linting

how we did it: gulp

how to do it now? grunt, npm scripts are also options

webpack building -> webpack 2 includes tree shaking

---

class: center, middle, inverse

# Lesson 7: Modernize your JavaScript for much success

???

TypeScript: use ES2015 features

Promises to avoid callback hell

JS Classes

Module system to have easier code structure 

---

class: center, middle, inverse

# Lesson 8: Learn from established patterns

---

class: middle

```javascript
xjs.ready()
  .then(Source.getCurrentSource)
  .then(function(mySource) {
    return mySource.loadConfig();
  }).then(function(config) {
    // apply the loaded configuration object onto the source
  });
```

```javascript
var button = document.getElementById('openDialogButton');
button.addEventListener('click', function() {
  xjs.Dialog.createDialog('your.url/here.html')
  .setSize(500, 800)
  .setTitle('ThisDialogReturnsAString')
  .setBorderOptions(true, false)
  .setButtons(true, true)
  .show()
  .getResult().then(function(result) {
    document.getElementById('input').value = result;
  });
});
```

???

(in addition to making use of established libraries instead of reinventing the wheel)

Learn techniques from libraries and frameworks in the wild

Beautiful interface with a fluent API with our method chaining: examples are with setting properties, or initializing a NewDialog

Beautiful code with coding standards. In addition to linting, use your text editor (.editorrc, Sublime margins + whitespace display settings)

suggest airbnb

---

class: center, middle, inverse

# Lesson 9: Have a vision for your project

???

Makes for a consistent API

Github issues might have unusual requests, make sure to know how to approach them

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
